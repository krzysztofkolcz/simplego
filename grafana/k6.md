## Run k6 test
```
k6 run --out json=results_same_id.json grpc_test_same_id.js
```

### influxdb
#### ğŸ§© KROK 1: Uruchom InfluxDB (np. przez Docker)
```
docker run -d \
  --name influxdb \
  -p 8086:8086 \
  -v $PWD/influxdb:/var/lib/influxdb2 \
  influxdb:2.7

```

#### ğŸ§  KROK 2: Skonfiguruj InfluxDB

WejdÅº w przeglÄ…darce:
ğŸ‘‰ http://localhost:8086

Przy pierwszym uruchomieniu:

UtwÃ³rz uÅ¼ytkownika (np. admin)

Podaj hasÅ‚o

UtwÃ³rz organization â€“ np. k6-org

UtwÃ³rz bucket â€“ np. k6-bucket

Zostanie pokazany token (waÅ¼ne!) â€“ skopiuj go, bo zaraz go uÅ¼yjemy

#### ğŸš€ KROK 3: Uruchom test k6 z wyjÅ›ciem do InfluxDB

Teraz moÅ¼esz uruchomiÄ‡ k6 z opcjÄ… --out influxdb.

K6_INFLUXDB_ORGANIZATION=k6-org \
K6_INFLUXDB_BUCKET=k6-bucket \
K6_INFLUXDB_TOKEN=twÃ³j_token_z_influxdb \
k6 run --out influxdb=http://localhost:8086 grpc_test_same_id.js

#### ğŸ“Š KROK 4: Uruchom GrafanÄ™

RÃ³wnieÅ¼ najÅ‚atwiej przez Docker:

docker run -d \
  -p 3000:3000 \
  --name grafana \
  grafana/grafana


Potem wejdÅº w przeglÄ…darce:
ğŸ‘‰ http://localhost:3000

Zaloguj siÄ™:

user: admin
pass: admin


i zmieÅ„ hasÅ‚o przy pierwszym logowaniu.

#### ğŸ”— KROK 5: Dodaj InfluxDB jako Data Source w Grafanie

W Grafanie â†’ kliknij Connections â†’ Data sources â†’ Add data source

Wybierz InfluxDB

Ustaw:

Query Language: Flux

URL: http://host.docker.internal:8086
(jeÅ›li Grafana teÅ¼ dziaÅ‚a w Dockerze; jeÅ›li nie, to http://localhost:8086)

Organization: k6-org

Token: twÃ³j_token_z_influxdb

Default bucket: k6-bucket

Kliknij Save & Test â†’ powinno pokazaÄ‡ â€Data source is workingâ€.

#### ğŸ“ˆ KROK 6: Zaimportuj gotowy dashboard k6

Grafana ma oficjalny dashboard do k6:

W Grafanie kliknij Dashboards â†’ Import

W polu Import via grafana.com wpisz ID:
ğŸ‘‰ 2587

Kliknij Load

Wybierz swÃ³j InfluxDB data source â†’ Import

Dashboard pokaÅ¼e:

czas trwania requestÃ³w

iloÅ›Ä‡ iteracji

bÅ‚Ä™dy (fail checks)

VUs i throughput w czasie

#### âœ… KROK 7: Uruchom test ponownie i obserwuj w Grafanie

Zostaw GrafanÄ™ otwartÄ… i uruchom:

K6_INFLUXDB_ORGANIZATION=k6-org \
K6_INFLUXDB_BUCKET=k6-bucket \
K6_INFLUXDB_TOKEN=twÃ³j_token_z_influxdb \
k6 run --out influxdb=http://localhost:8086 grpc_test_same_id.js


Po chwili (zazwyczaj kilka sekund) wykresy w Grafanie siÄ™ zapeÅ‚niÄ….

ğŸ§¹ Dodatkowe wskazÃ³wki

JeÅ›li testujesz czÄ™sto, warto dodaÄ‡ --tag test="grpc_same_id"
wtedy moÅ¼esz w Grafanie filtrowaÄ‡ po nazwie testu.
PrzykÅ‚ad:

k6 run --tag test=grpc_same_id --out influxdb=http://localhost:8086 grpc_test_same_id.js


MoÅ¼esz teÅ¼ zapisaÄ‡ konfiguracjÄ™ InfluxDB w .env i dodaÄ‡ do k6:

export K6_INFLUXDB_ORGANIZATION=k6-org
export K6_INFLUXDB_BUCKET=k6-bucket
export K6_INFLUXDB_TOKEN=twÃ³j_token



k6 run --out influxdb=http://localhost:8086/k6 grpc_test_same_id.js

###

```
export const options = {
  vus: 10,
  duration: '10s',
};
```

100 request
10 uv make about 100 iterations
```
export const options = {
  scenarios: {
    burst: {
      executor: 'shared-iterations',
      vus: 10,
      iterations: 100,
    },
  },
};

```

50 iterations/sec, 10 sec duration
uv - dynamics, choosen by k6
```
export const options = {
  scenarios: {
    steady: {
      executor: 'constant-arrival-rate',
      rate: 50, // 50 iterations na sekundÄ™
      timeUnit: '1s',
      duration: '10s',
      preAllocatedVUs: 20,
    },
  },
};
```

```
export const options = {
    stages: [
        { duration: '5m', target: 200 },  // ramp up - 200 request/sec
        { duration: '20m', target: 200 },  // stable - 200 request/sec
        { duration: '5m', target: 0 },  // ramp-down
    ]
}
```

```
```